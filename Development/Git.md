![[asset_upload_file97293_255583.webp|300]]
>[!info] Файлы в Git могут быть
> 1. Неотслеживаемыми
>     - Игнорируемые
>     - Неотслеживаемые(Untracked) 
>2. Отслеживаемыми
>     - Неизменённые(Unmodified)
>     - Измененные (Modified)
>     - Подготовленные к коммиту (Staged)

![[Pasted image 20231217180638.png]]
## Слить ветки можно двумя способами:
1. **merge**                                           ==*ветки сливаются и получается сумма изменений*==
   - **git merge hotfix**                            (*из ветки мейн сливаемся с веткой hotfix*)
   
2. **rebase**                                          ==*начало одной ветки ставится в конец другой*==
   - **git rebase main peter_feature**     (*ставим ветки одна за другой(main->peter_feature)*)
   - **git merge peter_feature**              ( *из main сливаем ветки в одну*)

## Команды
|  команда                 |  описание  |
|--------------------------|-----------|
|`git version`|*версия гита*                                             
|`git help` |*хэлп*
|`git clone URL .`|*клонировать удалённый репозиторий в текущ. директорию*
|`git remote add repo_name URL`  |*добавить удалённый репозиторий*
|`git config --global user.name "ufodriver"`|*имя записывается в конфиг*
|`git config --global user.email "...@mail.ru"`|*мыло записывается в конфиг*
|`git status`|*статус отслеживаемых файлов*
|`git init`|*создание нового локального репозитория*
|`git add searsh.php`|*добавить файл в индекс*
|`git add .`|*добавить ВСЕ файлы в индекс*
|`git rm --cached searsh.php`|*удалить файл из индекса*
|`git mv README.md README.txt`|*перемещение(или переименование) файла в                                                                                                       индексе*
|`git commit -m "text"`|*запомнить состояние отслеживаемых файлов                                                                                                    (снимок индекса) (-m не нужно открывать                                                                                                       текстовый редактор)*
|`git commit -m <файл_1> <файл_2> <файл_3> "комментарий"`|*закоммитить не весь индекс, а                                                                                                                               отдельные файлы*
|`git commit --amend -m "Version Modified"`|*внести поправку в предидущий коммит*
|`git commit -am  "new commit"`|*добавить в индекс все файлы и закоммитить*
|`git show 17368ea`|*посмотреть информацию по коммиту 17368ea*
|`git log`|*лог*
|`git log main --oneline`|*лог, где коммиты каждый в одну строчку*
|`git log --oneline -n 3`|*только 3 последних коммита(--oneline усекает                                                                                                  вывод до сокр. хэшей; -n 3 огран 3 записи)*
|`git reset HEAD~1`|*сбросить 1 коммит(soft: изменения остаются в                                                                                                   working directory)*
|`git reset --hard HEAD~1`|*сбросить 1 коммит(hard: вообще удаляются                                                                                                         изменения)*
|`git reset --hard`|*откатить к последнему коммиту и удалить все                                                                                                   изменения в локальном репозитории*
|`git reset --hard 7c4ea66`| *откатить к коммиту `7c4ea66` и удалить все изменения в лок. репозитории*
|`touch .gitignore`|*создать файл списка игнорируемых (можно                                                                                                        записать venv/ .idea/ *.txt)*
|`git branch xxx`|*создать ветку xxx*
|`git branch`|*посмотреть ветки лок. репозитория*
|`git branch -m "asdf"`|*переименовать ветку*
|`git branch -d test`|*удалить ветку xxx из лок. репоз.*
|`git branch -va`|*показать все ветки(v - подробно)*
|`git checkout -b test`|*создать ветку test и перейти в неё*
|`git push origin -d xxx`|*запушить удаление ветки  xxx из удал. репоз.                                                                                               (origin -  сокращение для имени удал. репозитория)*
|`git checkout xxx`|*переключить основную ветку на xxx*
|`git rebase main peter_feature`|*ветка peter_feature соединяется с main. Её начало                                                                    присоединяется к концу main(далее нужно                                                                                                     сделать из ветки мейн git merge peter feature)*
|`git stash`|*поместить данные в "буфер", чтоб не коммитить                                                                                                незаконченное*
|`git stash list`|*показать "буфер"*
|`git stash pop`|*извлечь "буфер"(Восстановить состояние лок.                                                                                                   файлов)*
|`git merge hotfix`|*слияние веток hotfix и текущей (status и смотрим                                                                                              конфликтные файлы, комитим). Если конфликты:                                                                                            решаем конфликты, git add, git merge --continue*
|`git merge --abort`|*отмена слияния*
|`git cherry-pick 17368ea`|*перенести коммит в HEAD текущей ветки*
|`git reflog`|*показать историю*
|`git reflog new`|*показать историю ветки new*
|`git remote -v  `|проверить соединение*
|`git remote remove repo_name `|*удалить удал. репозитроий*
|`git push repo_name master`|*отправка данных в удалённый репозиторий ветка                                                                                            master (название репозитория можно                                                                                                               посмотреть из git remote -v, напр. origin)*
|`git push -f repo_name master`|*насильно запушить изменения в удалённый                                                                                                        репозиторий*
|`git fetch repo_name`|*получить данные из удалённого                                                                                                                             репозитория(скачивает все ветки)*
|`git pull repo_name master`|*получить данные из удалённого репозитория                                                                                                     (получает нужную ветку и пытается                                                                                                                  инегрировать в активную ветку локального                                                                                                  репозитория) (аналог `git fetch `+ `git merge`)*

#### Отмена изменений

| команда | описание |
|-----|-----|
|`git restore README.md`|*отмена несохранённых локальных изменений                                                                                                   (если файл не был добавлен в индекс)*
|`git checkout . `|*отменить все изменения во всех файлах рабочей                                                                                             копии(если файлы не был добавлены в индекс)*
|`git restore --staged README.md`|*убрать из индекса ранее проиндексированный                                                                                                  файл*
|`git revert e8f7421 `|*отменить коммит e8f7421(Создаётся новый коммит)*|
|`git revert -n HEAD~3..HEAD`| *отменить 3 последних коммита(затем нужно выполнить git add и git commit)*|
|`git log --oneline`|*Посмотреть лог коммитов*
|`git show 009b7c0:eggs.py`|*Показать состояние файла eggs.py на момент                                                                                                  коммита 009b7c0*
|`git checkout 009b7c0 -- eggs.py`|*Вернуть содержимое файла eggs.py к версии                                                                                                   009b7c0*
|`git add eggs.py`|*Добавить в индекс*
|`git commit -m "Rolled back eggs.py to 009b7c0"`|*Сохранить изменения*

#### Удаление папки из удалённого репозитория
Если вы хотите удалить директорию из удаленного репозитория, но оставить её на вашем компьютере (например, вы ошибочно запушили директорию с локальным окружением `.venv`), то выполните следующие команды
```
git rm --cached -r <имя_директории>
git commit -m "remove имя_директории from repository"
git push origin main
```

#### Слияние 3 последних коммитов в один:
- `git rebase -i HEAD~3`
- Откроется окно текстового редактора интерактивного ребейза
Тут нужно заменить `pick` на `squash` для двух последних коммитов. Список читается снизу вверх, таким образом последний коммит, это самый нижний коммит в списке.

#### Новый репозиторий можно создать двумя способами:
1. Создание пустого репозитория в папке с уже существующим проектом и отправка в гитхаб (вместо пароля вводим токен):
    `git init`
     `git add *`
    `git commit -m "first commit"`
    `git branch -M main`
    `git remote add origin https://github.com/ufodriver007/PassManager.git`
    `git push -u origin main`
2. 

#### SSH соединение с GitHub
1. Создаём ssh ключ на сервере
создаём ключ
```
ssh-keygen -t rsa
```
сам ключ
```
cat ~/.ssh/id_rsa.pub
```

2. Заходим в наш GitHub -> Settings -> SSH and GPG keys. Добавляем наш SSH ключ.
3. Теперь на сервере можно управлять git'ом без дополнительных авторизаций.
Например клонируем git репозиторий(вместо HTTPS выбираем вкладку SSH)
```
git clone git@github.com:ufodriver007/drf_celerybeat_stats_demo.git
```
